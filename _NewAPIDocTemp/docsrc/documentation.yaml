# console
- name:    console
  tagline: Console interface
  props:
  - name: console.log
    js:   console.log(message[, ...])
    ts:   "console.log(message: any, ...optionalParams): void"
    desc: |
          Concatenates all provided text arguments with spaces and prints the result to the console with a trailing newline.
          ```
          console.log("Hello world!");
          ```
  
  - name: console.print
    js:   console.print(message)
    ts:   "console.print(message: any): void"
    desc: Prints `message` to the console.

  - name: console.clear
    js:   console.clear()
    ts:   "console.clear(): void"
    desc: Clears the console.

# mem
- name:    mem
  tagline: N64 memory interface
  props:
  - name: mem._
    js:   mem.u8|u16|u32|s8|s16|s32|f32|f64
    desc: |
          Arrays for reading and writing virtual memory. Virtual addresses are used as indices.
          ```
          // Read some data from ROM and RAM
          var firstWordInROM = mem.u32[0xB0000000];
          var firstWordInRAM = mem.u32[0x80000000];
          ```
          ```
          // Move player to 0,0,0 (SM64 US)
          const pPlayerX = 0x8033B1AC;
          const pPlayerY = 0x8033B1B0;
          const pPlayerZ = 0x8033B1B4;

          mem.f32[pPlayerX] = 0;
          mem.f32[pPlayerY] = 0;
          mem.f32[pPlayerZ] = 0;
          ```

  - name: mem.bindvar
    js:   mem.bindvar(object, address, name, typeId)
    ts:   "mem.bindvar(object: Object, address: number, name: string, typeId: number): void"
    desc: |
          Adds a memory-bound property to `object`.
          Valid types are `u8`, `u16`, `u32`, `s8`, `s16`, `s32`, `f32`, `f64`.
          See [Type IDs](#type_ids) for more details.
          ```
          mem.bindvar(this, 0x8033B1AC, 'playerX', f32);
          mem.bindvar(this, 0x8033B1B0, 'playerY', f32);
          mem.bindvar(this, 0x8033B1B4, 'playerZ', f32);

          console.log("Player's coordinates are ", this.playerX, this.playerY, this.playerZ);
          ```

  - name: mem.bindvars
    js:   mem.bindvars(object, vars)
    ts:  "mem.bindvars(object: Object, vars: any[]): Object"
    desc: |
          Adds multiple memory-bound properties to `object`.
          `vars` must be an array in which each item is an array containing an address, name, and [type ID](#type_ids) (in order) describing a variable.
          <div class="vtab""></div>
          Returns `object`.
          ```
          mem.bindvars(this, [
              [ 0x8033B1AC, 'playerX', f32 ],
              [ 0x8033B1B0, 'playerY', f32 ],
              [ 0x8033B1B4, 'playerZ', f32 ]
          ]);

          console.log("Player's coordinates are ", this.playerX, this.playerY, this.playerZ);
          ```

  - name: mem.bindstruct
    js:   mem.bindstruct(object, address, properties)
    ts:   "mem.bindstruct(object: Object, address: number, properties: Object): Object"
    desc: |
          Adds multiple memory-bound properties to `object`.
          `properties` must be an object in which each key/value pair specifies the name and [type ID](#type_ids) of a variable.
          The offset of a variable is determined by the sum of type sizes of the variables preceding it.
          <div class="vtab""></div>
          Returns `object`.
          <div class="vtab""></div>
          ```
          var playerPos = mem.bindstruct({}, 0x8033B1AC, { x: f32, y: f32, z: f32 });

          console.log("Player's coordinates are ", playerPos.x, playerPos.y, playerPos.z);
          ```

  - name: mem.typedef
    js:   mem.typedef(properties)
    ts:   "mem.typedef(properties: Object): MemTypeConstructor"
    desc: |
          Returns a constructor function that will create an object representing a structure in memory, given its address.
          ```
          const vec3f = mem.typedef({ x: f32, y: f32, z: f32 });
          var playerAngle = new vec3f(0x8033B19C);
          var playerPos = new vec3f(0x8033B1AC);
          ```

  - name: mem.getblock
    js:   mem.getblock(address, size)
    ts:   "mem.getblock(address: number, size: number): Buffer"
    desc: |
          Returns a block of data from memory as a [Buffer](https://nodejs.org/docs/v6.9.1/api/buffer.html) object.
          ```
          var ramDump = mem.getblock(0x80000000, mem.ramsize)
          fs.writeFile("ram-dump.bin", ramDump);
          ```

  - name: mem.getstring
    js:   mem.getstring(address[, maxLength])
    ts:   "mem.getblock(address: number, maxLength?: number): string"
    desc: | 
          Returns a zero-terminated ASCII string from memory.
          ```
          const romName = mem.getstring(0xB0000020, 0x14);
          ```

  - name: mem.ramsize
    js:   mem.ramsize
    ts:   "mem.ramsize: number"
    desc: The size of RDRAM in bytes. `0` if RDRAM is not initialized.

  - name: mem.romsize
    js:   mem.romsize
    ts:   "mem.romsize: number"
    desc: The size of cartridge ROM in bytes. `0` if ROM is not initialized.

# events
- name:    events
  tagline: Emulation event hooking interface
  props:
  - name: events.onexec
    js:   events.onexec(address, callback)
    ts:   "events.onexec(address: number | AddressRange, callback: (CPUExecEvent) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the program counter is at `address`.
          `address` may be a single address or an object containing `start` and `end` address properties (e.g. [AddressRange](#AddressRange)).
          `callback` receives a [CPUExecEvent](#CPUExecEvent) object.
          <div class="vtab""></div>
          Returns a callback ID.
          ```
          events.onexec(0x802CB1C0, function() {
              console.log("func_802CB1C0 was called");
          })
          ```
          ```
          // Log every CPU step
          events.onexec(ADDR_ANY, function(e) {
              console.log(e.pc.hex() + ": " + asm.decode(mem.u32[e.pc], e.pc));
          })
          ```

  - name: events.onread
    js:   events.onread(address, callback)
    ts:   "events.onread(address: number | AddressRange, callback: (e: CPUReadWriteEvent) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the CPU is going to read from `address`.
          `address` may be a single address or an object containing `start` and `end` address properties (e.g. [AddressRange](#AddressRange)).
          `callback` receives a [CPUReadWriteEvent](#CPUReadWriteEvent) object.
          <div class="vtab""></div>
          Returns a callback ID.

  - name: events.onwrite
    js:   events.onwrite(address, callback)
    ts:   "events.onwrite(address: number | AddressRange, callback: (e: CPUReadWriteEvent) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the CPU is going to write to `address`.
          `address` may be a single address or an object containing `start` and `end` address properties (e.g. [AddressRange](#AddressRange)).
          `callback` receives a [CPUReadWriteEvent](#CPUReadWriteEvent) object. (TODO)
          <div class="vtab""></div>
          Returns a callback ID.

  - name: events.onopcode
    js:   events.onopcode(address, opcode, mask, callback)
    ts:   "events.onopcode(address: number | AddressRange, opcode: number, mask: number, callback: (CPUOpcodeEvent) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the program counter is at `address` and
          `opcode` is equal to the current opcode ANDed with `mask`.
          `callback` receives a [CPUOpcodeEvent](#CPUOpcodeEvent) object.
          <div class="vtab""></div>
          Returns a callback ID.
          ```
          const JAL = asm.encode("jal 0");
          const ANY_TARGET = 0xFC000000; // Mask off target field

          events.onopcode(ADDR_ANY, JAL, ANY_TARGET, function() {
              // Log every JAL
              console.log(gpr.pc.hex() + ": " + asm.decode(mem.u32[gpr.pc], gpr.pc));
          });
          ```

  - name: events.onopcode
    js:   events.onopcode(address, opcode, callback)
    ts:   "events.onopcode(address: number | AddressRange, opcode: number, callback: (CPUOpcodeEvent) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the program counter is at `address` and
          `opcode` is equal to the current opcode.
          `callback` receives a [CPUOpcodeEvent](#CPUOpcodeEvent) object.
          <div class="vtab""></div>
          Returns a callback ID.

  - name: events.ongprvalue
    js:   events.ongprvalue(address, regFlags, value, callback)
    ts:   "events.ongprvalue(address: number | AddressRange, regFlags: number, value: number, callback: (regIndex: number) => void): number"
    desc: |
          Registers a callback that will be invoked at the beginning of a CPU step if the program counter is at `address` and at least one of
          the general purpose registers specified by `regFlags` is equal to `value` (lower 32 bits only). `callback` receives the index of the first register that is
          equal to `value`.
          `callback` receives a [CPURegValueEvent](#CPURegValueEvent) object.
          <div class="vtab""></div>
          Returns a callback ID.
          <div class="vtab""></div>
          See [General purpose register flags](#GPR_flags) for a list of valid flags. Multiple registers may be specified via bitwise OR.
          ```
          const IS64_SIGNATURE = 0x49533634;
          events.ongprvalue(ADDR_ANY, GPR_ANY, IS64_SIGNATURE, function() {
              // Break when any general purpose register contains 0x49533634
              debug.breakhere();
          });
          ```

  - name: events.ondraw
    js:   events.ondraw(callback)
    ts:   "events.ondraw(callback: () => void): number"
    desc: |
          Registers a callback that will be invoked immediately after Project64 requests a screen update from the graphics plugin.
          <div class="vtab""></div>
          Returns a callback ID.

  - name: events.remove
    js:   events.remove(callbackId)
    ts:   "events.remove(callbackId: number): void"
    desc: |
          Unregisters the callback specified by `callbackId`.
          ```
          events.onexec(0x802CB1C0, function(e) {
              // This is only invoked once
              console.log("func_802CB1C0 was called");
              events.remove(e.id);
          });
          ```

  - name: CPUExecEvent
    js:   CPUExecEvent
    desc: |
          <table>
          <tr><td>`e.pc`</td><td>Program counter address.</td></tr>
          <tr><td>`e.callbackId`</td><td>ID of the callback associated with this event.</td></tr>
          </table>

  - name: CPUReadWriteEvent
    js:   CPUReadWriteEvent
    desc: |
          <table>
          <tr><td>`e.pc`</td><td>Program counter address.</td></tr>
          <tr><td>`e.callbackId`</td><td>ID of the callback associated with this event.</td></tr>
          <tr><td>`e.address`</td><td>Address that the CPU is going to read/write.</td></tr>
          <tr><td>`e.fpu`</td><td>`true` if the source/destination register is on the floating point unit.</td></tr>
          <tr><td>`e.reg`</td><td>Index of the source/destination register.</td></tr>
          <tr><td>`e.type`</td><td>The value's type ID.</td></tr>
          <tr><td>`e.value`</td><td>Value that the CPU is going to read/write.</td></tr>
          <tr><td>`e.valueHi`</td><td>Upper 32 bits of the value if the current opcode is LD/SD. `undefined` if the opcode is not LD/SD.</td></tr>
          </table>

  - name: CPUOpcodeEvent
    js:   CPUOpcodeEvent
    desc: |
          <table>
          <tr><td>`e.pc`</td><td>Program counter address.</td></tr>
          <tr><td>`e.callbackId`</td><td>ID of the callback associated with this event.</td></tr>
          <tr><td>`e.opcode`</td><td>The opcode.</td></tr>
          </table>

  - name: CPURegValueEvent
    js:   CPURegValueEvent
    desc: |
          <table>
          <tr><td>`e.pc`</td><td>Program counter address.</td></tr>
          <tr><td>`e.callbackId`</td><td>ID of the callback associated with this event.</td></tr>
          <tr><td>`e.value`</td><td>The value.</td></tr>
          <tr><td>`e.reg`</td><td>Index of the register containing the value.</td></tr>
          </table>

  - name: GPR_flags
    js:   General purpose register flags
    desc: |
          Global flags for [events.ongprvalue](#events_ongprvalue)'s `regFlags` parameter.
          <pre>
          `GPR_ANY`

          `GPR_R0` `GPR_AT` `GPR_V0` `GPR_V1` `GPR_A0` `GPR_A1` `GPR_A2` `GPR_A3`
          `GPR_T0` `GPR_T1` `GPR_T2` `GPR_T3` `GPR_T4` `GPR_T5` `GPR_T6` `GPR_T7`
          `GPR_S0` `GPR_S1` `GPR_S2` `GPR_S3` `GPR_S4` `GPR_S5` `GPR_S6` `GPR_S7`
          `GPR_T8` `GPR_T9` `GPR_K0` `GPR_K1` `GPR_GP` `GPR_SP` `GPR_FP` `GPR_RA`
          </pre>

  - name: AddressRange
    js:   new AddressRange(start, end)
    ts:   "new AddressRange(start: number, end: number)"
    desc: |
          Creates an immutable object with `start` and `end` address properties.

          The following `AddressRange` objects are defined globally&#58;<br>
          <pre>
          `ADDR_ANY`              0x00000000 &#58; 0xFFFFFFFF Any address
          `ADDR_ANY_KUSEG`        0x00000000 &#58; 0x7FFFFFFF MIPS user mode TLB mapped segment
          `ADDR_ANY_KSEG0`        0x80000000 &#58; 0x9FFFFFFF MIPS cached unmapped segment
          `ADDR_ANY_KSEG1`        0xA0000000 &#58; 0xBFFFFFFF MIPS uncached unmapped segment
          `ADDR_ANY_KSEG2`        0xC0000000 &#58; 0xFFFFFFFF MIPS kernel mode TLB mapped segment
          `ADDR_ANY_RDRAM`        0x80000000 &#58; 0x807FFFFF Cached RDRAM
          `ADDR_ANY_RDRAM_UNC`    0xA0000000 &#58; 0xA07FFFFF Uncached RDRAM
          `ADDR_ANY_CART_ROM`     0x90000000 &#58; 0x95FFFFFF Cached cartridge ROM
          `ADDR_ANY_CART_ROM_UNC` 0xB0000000 &#58; 0xB5FFFFFF Uncached cartridge ROM
          </pre>

# screen
- name:    screen
  tagline: Screen drawing interface
  props:
  - name: screen.print
    js:   screen.print(x, y, text)
    ts:   "screen.print(x: number, y: number, text: string): void"
    tags: [[Unstable, red]]
    desc: |
          Prints text to the screen at the provided `x` and `y` coordinates.
          Should be called from an [events.ondraw](#events_ondraw) callback.
          ```
          events.ondraw(function() {
              screen.print(20, 20, "Power: " + mem.u8[0x8033B21E]);
          });
          ```
# cpu
- name:    cpu
  tagline: CPU interface
  props:
  - name: cpu.pc
    js:   cpu.pc
    desc: Variable representing the CPU's program counter.

  - name: cpu.hi
    js:   cpu.hi
    desc: Variable representing the lower 32 bits of the CPU's HI register.

  - name: cpu.lo
    js:   cpu.lo
    desc: Variable representing the lower 32 bits of the CPU's LO register.

  - name: cpu.uhi
    js:   cpu.uhi
    desc: Variable representing the upper 32 bits of the CPU's HI register.

  - name: cpu.ulo
    js:   cpu.ulo
    desc: Variable representing the upper 32 bits of the CPU's LO register.

  - name: cpu.gpr._
    js:   cpu.gpr.r0|at|v0|v1..ra
    js2:  cpu.gpr[0..31]
    ts:   cpu.gpr.r0|at|v0|v1|a0|a1|a2|a3|t0|t1|t2|t3|t4|t5|t6|t7|s0|s1|s2|s3|s4|s5|s6|s7|t8|t9|k0|k1|gp|sp|fp|ra
    desc: Variables representing the lower 32 bits of the CPU's general purpose registers.

  - name: cpu.ugpr._
    js:   cpu.ugpr.r0|at|v0|v1..ra
    js2:  cpu.ugpr[0..31]
    ts:   cpu.ugpr.r0|at|v0|v1|a0|a1|a2|a3|t0|t1|t2|t3|t4|t5|t6|t7|s0|s1|s2|s3|s4|s5|s6|s7|t8|t9|k0|k1|gp|sp|fp|ra
    desc: Variables representing the upper 32 bits of the CPU's general purpose registers.

  - name: cpu.fpr._
    js:   cpu.fpr.f0..f31
    js2:  cpu.fpr[0..31]
    desc: Variables representing the CPU's 32-bit floating-point registers.

  - name: cpu.dfpr._
    js:   cpu.dfpr.f0..f30
    js2:  cpu.dfpr[0..30]
    desc: Variables representing the CPU's 64-bit floating-point registers.

  - name: cpu.cop0.index
    js:   cpu.cop0.index
    desc: Variable representing the Index register.
  - name: cpu.cop0.random
    js:   cpu.cop0.random
    desc: Variable representing the Random register.
  - name: cpu.cop0.entrylo0
    js:   cpu.cop0.entrylo0
    desc: Variable representing the EntryLo0 register.
  - name: cpu.cop0.entrylo1
    js:   cpu.cop0.entrylo1
    desc: Variable representing the EntryLo1 register.
  - name: cpu.cop0.context
    js:   cpu.cop0.context
    desc: Variable representing the Context register.
  - name: cpu.cop0.pagemask
    js:   cpu.cop0.pagemask
    desc: Variable representing the PageMask register.
  - name: cpu.cop0.wired
    js:   cpu.cop0.wired
    desc: Variable representing the Wired register.
  - name: cpu.cop0.badvaddr
    js:   cpu.cop0.badvaddr
    desc: Variable representing the BadVAddr register.
  - name: cpu.cop0.count
    js:   cpu.cop0.count
    desc: Variable representing the Count register.
  - name: cpu.cop0.entryhi
    js:   cpu.cop0.entryhi
    desc: Variable representing the EntryHi register.
  - name: cpu.cop0.compare
    js:   cpu.cop0.compare
    desc: Variable representing the Compare register.
  - name: cpu.cop0.status
    js:   cpu.cop0.status
    desc: Variable representing the Status register.
  - name: cpu.cop0.cause
    js:   cpu.cop0.cause
    desc: Variable representing the Cause register. Updates interrupts when written.
  - name: cpu.cop0.epc
    js:   cpu.cop0.epc
    desc: Variable representing the EPC register.
  - name: cpu.cop0.config
    js:   cpu.cop0.config
    desc: Variable representing the Config register.
  - name: cpu.cop0.taglo
    js:   cpu.cop0.taglo
    desc: Variable representing the TagLo register.
  - name: cpu.cop0.taghi
    js:   cpu.cop0.taghi
    desc: Variable representing the TagHi register.
  - name: cpu.cop0.errorepc
    js:   cpu.cop0.errorepc
    desc: Variable representing the ErrorEPC register.

# debug
- name: debug
  tagline: Debugger interface
  props:
  - name: debug.breakhere
    js:   debug.breakhere()
    ts:   "debug.breakhere(): void"
    desc: |
          Pauses emulation and shows the CPU commands window. Useful for creating conditional breakpoints.
          ```
          events.onexec(0x802CB1C0, function() {
              if(gpr.a0 == 21) {
                  console.log("21 passed to func_802CB1C0, breaking...");
                  debug.breakhere();
              }
          });
          ```

  - name: debug.skip
    js:   debug.skip()
    ts:   "debug.skip(): void"
    desc: |
          Skips the current CPU command. Useful for preventing or overriding an operation.
          ```
          // Do not let the CPU write to 0x8033B21E
          events.onwrite(0x8033B21E, function(e) {
              debug.skip();
          });
          ```

  - name: debug.showmemory
    js:   debug.showmemory(address)
    ts:   "debug.showmemory(address: number): void"
    desc: Shows the memory window at `address`.

  - name: debug.showcommands
    js:   debug.showcommands(address)
    ts:   "debug.showcommands(address: number): void"
    desc: Shows the CPU commands window at `address`.


# asm
- name: asm
  tagline: ASM utilities
  props:

  - name: asm.encode
    js:   "asm.encode(command[, address])"
    ts:   "asm.encode(command: string, address?: number): number"
    desc: |
          Encodes a single MIPS R4300i opcode. `address` is an optional parameter that may be used to hint the address of the instruction for branch offset calculation.
          <div class="vtab"></div>
          Returns the opcode as a number.
          ```
          asm.encode("nop");                      // 0x00000000
          asm.encode("addiu sp, sp, -24");        // 0x27BDFFE8
          asm.encode("b 0x80400000", 0x803FFF00); // 0x1000003F
          asm.encode("b 0x80400000", 0x80400100); // 0x1000FFBF
          ```

  - name: asm.decode
    js:   asm.decode(opcode[, address])
    ts:   "asm.decode(opcode: number, address?: number)"
    desc: |
          Decodes a single MIPS R4300i opcode. `address` is an optional parameter that may be used to hint the address of the instruction for branch address calculation.
          <div class="vtab"></div>
          Returns a line of assembly code as a string.
          ```
          asm.decode(0x00000000);             // "NOP"
          asm.decode(0x27BDFFE8);             // "ADDIU SP, SP, -0x18"
          asm.decode(0x1000003F, 0x803FFF00); // "B 0x80400000"
          asm.decode(0x1000FFBF, 0x80400100); // "B 0x80400000"
          ```

  - name: asm.gprname
    js:   asm.gprname(regIndex)
    ts:   "asm.gprname(regIndex: number): string"
    desc: |
          Returns the name of the general purpose register specified by `regIndex`.
          ```
          asm.gprname(4); // returns 'a0'
          ```

# fs
- name: fs
  tagline: File system interface
  props:
  - name: fs.open
    js:   fs.open(path, mode)
    ts:   "fs.open(path: string, mode: string): number"
    desc: |
          Opens the file pointed to by `path` in the mode specified by `mode`.
          See [fopen](https://pubs.opengroup.org/onlinepubs/009604599/functions/fopen.html) for a list of valid modes.
          <div class="vtab""></div>
          Returns a file descriptor.

  - name: fs.close
    js:   fs.close(fd)
    ts:   "fs.close(fd): void"
    desc: Closes the file referenced by `fd`.

  - name: fs.write
    js:   fs.write(fd, buffer[, offset[, length[, position]]])
    ts:   "fs.write(fd: number, buffer: string | Buffer | ArrayBuffer, offset?: number, length?: number, position?: number): number"
    desc: |
          Writes `buffer` to the file referenced by file descriptor `fd`. `buffer` may be one of the following types&#58;
          [ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer),
          [Buffer](https://nodejs.org/docs/v6.9.1/api/buffer.html),
          [DataView](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView),
          [TypedArray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray), string.<br><br>
          `offset`&#58; optional position in the source buffer.<br>
          `length`&#58; optional maximum number of bytes to write.<br>
          `position`&#58; optional file position.
          <div class="vtab""></div>
          Returns the number of bytes written.
          ```
          var fd = fs.open("file.txt", "wb");
          fs.write(fd, "hello\n");
          fs.write(fd, "world\n");
          fs.close();
          ```

  - name: fs.writeFile
    js:   fs.writeFile(path, buffer)
    ts:   "fs.writeFile(path: string, buffer: string | Buffer | ArrayBuffer): void"
    desc: |
          Writes `buffer` to the file specified by `path`. Uses mode "wb" internally.
          ```
          var ramdump = mem.getblock(0x80000000, 0x00400000);
          fs.writeFile("ramdump.bin", ramdump);
          ```

  - name: fs.read
    js:   fs.read(fd, buffer, offset, length, position)
    ts:   "fs.read(fd: number, buffer: Buffer | ArrayBuffer, offset: number, length: number, position: number) : number"
    desc: |
          Reads data from the file referenced by `fd` into `buffer`. `buffer` may be one of the following types&#58;
          [ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer),
          [Buffer](https://nodejs.org/docs/v6.9.1/api/buffer.html),
          [DataView](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView),
          [TypedArray](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray).<br><br>
          `offset`&#58; position in the source buffer.<br>
          `length`&#58; number of bytes to read.<br>
          `position`&#58; file position.
          <div class="vtab""></div>
          Returns the number of bytes read.

  - name: fs.readFile
    js:   fs.readFile(path)
    ts:   "fs.readFile(path: string): Buffer"
    desc: |
          Returns a [Buffer](https://nodejs.org/docs/v6.9.1/api/buffer.html) object representing the data of the file specified by `path`.
          Uses mode "rb" internally.

  - name: fs.fstat
    js:   fs.fstat(fd)
    ts:   "fs.fstat(fd: number): fs.Stats"
    desc: |
          Returns an [fs.Stats](#fs_Stats) object containing information about the file referenced by `fd`.

  - name: fs.stat
    js:   fs.stat(path)
    ts:   "fs.stat(path: string): fs.Stats"
    desc: |
          Returns an [fs.Stats](#fs_Stats) object containing information about the file specified by `path`.

  - name: fs.unlink
    js:   fs.unlink(path)
    ts:   "fs.unlink(path: string): boolean"
    desc: |
          Deletes the file specified by `path`. Returns `true` if the operation is successful.

  - name: fs.mkdir
    js:   fs.mkdir(path)
    ts:   "fs.mkdir(path: string): boolean"
    desc: |
          Creates a directory. Returns `true` if the operation is successful.

  - name: fs.rmdir
    js:   fs.rmdir(path)
    ts:   "fs.rmdir(path: string): boolean"
    desc: |
          Deletes a directory. The directory must be empty. Returns `true` if the operation is successful.

  - name: fs.readdir
    js:   "fs.readdir(path)"
    ts:   "fs.readdir(path: string): string[]"
    desc: |
          Returns an array of file names from a directory.

  - name: fs.Stats
    js:   fs.Stats
    desc: |
          Object containing information about a file or directory. Generated by [fs.fstat/fs.stat](#fs_fstat).
          <div class="vtab""></div>
          <table>
          <tr><td>`stats.dev`</td><td>ID of the device the file resides on</td></tr>
          <tr><td>`stats.ino`</td><td>inode number</td></tr>
          <tr><td>`stats.mode`</td><td>File permissions</td></tr>
          <tr><td>`stats.nlink`</td><td>Number of links to the file</td></tr>
          <tr><td>`stats.uid`</td><td>User ID</td></tr>
          <tr><td>`stats.gid`</td><td>Group ID</td></tr>
          <tr><td>`stats.rdev`</td><td>Device ID (if file is character or block special)</td></tr>
          <tr><td>`stats.size`</td><td>Size of the file in bytes</td></tr>
          <tr><td>`stats.atimeMs`</td><td>Last access timestamp in milliseconds</td></tr>
          <tr><td>`stats.mtimeMs`</td><td>Last modification timestamp in milliseconds</td></tr>
          <tr><td>`stats.ctimeMs`</td><td>Creation timestamp in milliseconds</td></tr>
          <tr><td>`stats.atime`</td><td>JS Date object representing the last access time</td></tr>
          <tr><td>`stats.mtime`</td><td>JS Date object representing the last modification time</td></tr>
          <tr><td>`stats.ctime`</td><td>JS Date object representing the creation time</td></tr>
          </table>
          <div class="vtab""></div>
          <b>stats.isDirectory()</b><br>
          <div class="tsproto">stats.isDirectory(): boolean</div>
          <div class="vtab""></div>
          Returns `true` if the `fs.Stats` object describes a directory.
          <div class="vtab""></div>
          <b>stats.isFile()</b><br>
          <div class="tsproto">stats.isFile(): boolean</div>
          <div class="vtab""></div>
          Returns `true` if the `fs.Stats` object describes a regular file.

# script
- name: script
  tagline: Script instance configuration interface
  props:
  - name: script.listen
    js:   script.listen(inputListener)
    ts:   "script.listen(inputListener: (input: string) => void): void"
    desc: |
          Sets a console input listener function.
          Console input will be passed to `inputListener` rather than being evaluated as JS code.
          The listener may be unset by calling `script.listen(undefined)`.
          ```
          script.listen(function(input) {
              input = input.split(' ');
              var command = input.shift();
              var args = input;
              switch(command) {
                  case "ping":
                      console.log("pong (args were:", args.join(', '), ")");
                      return;
                  case "end":
                      console.log("done");
                      script.listen(undefined);
                      return;
                  default:
                      console.log("unknown command '" + command + "'");
              }
          });
          ```

  - name: script.keepalive
    js:   script.keepalive(bKeepAlive)
    ts:   "script.keepalive(bKeepAlive: boolean): void"
    desc: |
          Prevents the script instance from being destroyed when it has nothing left to do.
          Useful when the default console input behavior is desired.

  - name: script.timeout
    js:   script.timeout(milliseconds)
    ts:   "script.timeout(milliseconds: number): void"
    desc: |
          Sets the maximum amount of time tasks may run on the script instance before errors are thrown. By default this value is 500 milliseconds.
          Setting this value to zero will allow tasks to run indefinitely (not recommended; may cause deadlocks).

# global definitions
- name: Global definitions
  props:
  - name: alert
    js:   alert(message[, caption])
    ts:   "alert(message: string, caption?: string): number"
    desc: |
          Shows a message box with an optional caption. The calling thread is blocked until the message box is dismissed.

  - name: number.hex
    js:   number.hex([numChars])
    ts:   "number.hex(numChars?: number): string"
    desc: |
          Returns a hexadecimal string representation of the number object.
          The returned string is prepended with zeroes until its character length meets `numChars` or 8 by default.
          ```
          var n = 123;
          n.hex();  // 0000007B
          n.hex(4); // 007B
          ```

  - name: type_ids
    js:   Type IDs
    desc: |
          Global type IDs.
          <pre>
          `u8`  Unsigned 8-bit integer
          `u16` Unsigned 16-bit integer
          `u32` Unsigned 32-bit integer
          `s8`  Signed 8-bit integer
          `s16` Signed 16-bit integer
          `s32` Signed 32-bit integer
          `f32` 32-bit single precision floating-point
          `f64` 64-bit double precision floating-point

          `u64` Unsigned 64-bit integer
          </pre>

          Note: The [mem.bind*](#mem_bindvar)/[mem.typedef](#mem_typedef) APIs do not currently support `u64`.

  - name: Memory_mapped_register_addresses
    js:   Memory mapped register addresses
    desc: |
          <pre>
          `RDRAM_CONFIG_REG`       0xA3F00000
          `RDRAM_DEVICE_TYPE_REG`  0xA3F00000
          `RDRAM_DEVICE_ID_REG`    0xA3F00004
          `RDRAM_DELAY_REG`        0xA3F00008
          `RDRAM_MODE_REG`         0xA3F0000C
          `RDRAM_REF_INTERVAL_REG` 0xA3F00010
          `RDRAM_REF_ROW_REG`      0xA3F00014
          `RDRAM_RAS_INTERVAL_REG` 0xA3F00018
          `RDRAM_MIN_INTERVAL_REG` 0xA3F0001C
          `RDRAM_ADDR_SELECT_REG`  0xA3F00020
          `RDRAM_DEVICE_MANUF_REG` 0xA3F00024

          `SP_MEM_ADDR_REG`        0xA4040000
          `SP_DRAM_ADDR_REG`       0xA4040004
          `SP_RD_LEN_REG`          0xA4040008
          `SP_WR_LEN_REG`          0xA404000C
          `SP_STATUS_REG`          0xA4040010
          `SP_DMA_FULL_REG`        0xA4040014
          `SP_DMA_BUSY_REG`        0xA4040018
          `SP_SEMAPHORE_REG`       0xA404001C

          `SP_PC_REG`              0xA4080000
          `SP_IBIST_REG`           0xA4080004

          `DPC_START_REG`          0xA4100000
          `DPC_END_REG`            0xA4100004
          `DPC_CURRENT_REG`        0xA4100008
          `DPC_STATUS_REG`         0xA410000C
          `DPC_CLOCK_REG`          0xA4100010
          `DPC_BUFBUSY_REG`        0xA4100014
          `DPC_PIPEBUSY_REG`       0xA4100018
          `DPC_TMEM_REG`           0xA410001C

          `DPS_TBIST_REG`          0xA4200000
          `DPS_TEST_MODE_REG`      0xA4200004
          `DPS_BUFTEST_ADDR_REG`   0xA4200008
          `DPS_BUFTEST_DATA_REG`   0xA420000C

          `MI_INIT_MODE_REG`       0xA4300000
          `MI_MODE_REG`            0xA4300000
          `MI_VERSION_REG`         0xA4300004
          `MI_NOOP_REG`            0xA4300004
          `MI_INTR_REG`            0xA4300008
          `MI_INTR_MASK_REG`       0xA430000C

          `VI_STATUS_REG`          0xA4400000
          `VI_CONTROL_REG`         0xA4400000
          `VI_ORIGIN_REG`          0xA4400004
          `VI_DRAM_ADDR_REG`       0xA4400004
          `VI_WIDTH_REG`           0xA4400008
          `VI_H_WIDTH_REG`         0xA4400008
          `VI_INTR_REG`            0xA440000C
          `VI_V_INTR_REG`          0xA440000C
          `VI_CURRENT_REG`         0xA4400010
          `VI_V_CURRENT_LINE_REG`  0xA4400010
          `VI_BURST_REG`           0xA4400014
          `VI_TIMING_REG`          0xA4400014
          `VI_V_SYNC_REG`          0xA4400018
          `VI_H_SYNC_REG`          0xA440001C
          `VI_LEAP_REG`            0xA4400020
          `VI_H_SYNC_LEAP_REG`     0xA4400020
          `VI_H_START_REG`         0xA4400024
          `VI_H_VIDEO_REG`         0xA4400024
          `VI_V_START_REG`         0xA4400028
          `VI_V_VIDEO_REG`         0xA4400028
          `VI_V_BURST_REG`         0xA440002C
          `VI_X_SCALE_REG`         0xA4400030
          `VI_Y_SCALE_REG`         0xA4400034

          `AI_DRAM_ADDR_REG`       0xA4500000
          `AI_LEN_REG`             0xA4500004
          `AI_CONTROL_REG`         0xA4500008
          `AI_STATUS_REG`          0xA450000C
          `AI_DACRATE_REG`         0xA4500010
          `AI_BITRATE_REG`         0xA4500014

          `PI_DRAM_ADDR_REG`       0xA4600000
          `PI_CART_ADDR_REG`       0xA4600004
          `PI_RD_LEN_REG`          0xA4600008
          `PI_WR_LEN_REG`          0xA460000C
          `PI_STATUS_REG`          0xA4600010
          `PI_BSD_DOM1_LAT_REG`    0xA4600014
          `PI_BSD_DOM1_PWD_REG`    0xA4600018
          `PI_BSD_DOM1_PGS_REG`    0xA460001C
          `PI_BSD_DOM1_RLS_REG`    0xA4600020
          `PI_BSD_DOM2_LAT_REG`    0xA4600024
          `PI_BSD_DOM2_PWD_REG`    0xA4600028
          `PI_BSD_DOM2_PGS_REG`    0xA460002C
          `PI_BSD_DOM2_RLS_REG`    0xA4600030

          `RI_MODE_REG`            0xA4700000
          `RI_CONFIG_REG`          0xA4700004
          `RI_CURRENT_LOAD_REG`    0xA4700008
          `RI_SELECT_REG`          0xA470000C
          `RI_REFRESH_REG`         0xA4700010
          `RI_COUNT_REG`           0xA4700010
          `RI_LATENCY_REG`         0xA4700014
          `RI_RERROR_REG`          0xA4700018
          `RI_WERROR_REG`          0xA470001C

          `SI_DRAM_ADDR_REG`       0xA4800000
          `SI_PIF_ADDR_RD64B_REG`  0xA4800004
          `SI_PIF_ADDR_WR64B_REG`  0xA4800010
          `SI_STATUS_REG`          0xA4800018
          </pre>

- name: JavaScript environment
  desc: |
        <div class="vtab""></div>
        Project64's script system uses [Duktape](https://duktape.org/). Duktape supports ECMAScript E5 and some features from ES2015+.<br>
        See [https://duktape.org/](https://duktape.org/) for more information.

